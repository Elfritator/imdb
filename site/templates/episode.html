{% extends "base.html" %}

{% block title %}
{% set (stitle, syear, snote, season, episodenum, date, etitle, SID) = episode %}
{{ stitle }} ({{ syear }})| Season {{ season }}. {{ episodenum }} {{ etitle }}
{% end %}


{% block body %}
{% set (stitle, syear, snote, season, episodenum, date, etitle, SID) = episode %}
    <h1>{{ etitle }}</h1>
    Serie : <a href="/serie/{{ SID }}">{% raw url_escape(stitle) %}</a>
    Season : {{ season }}
    Episode : {{ episodenum }}
    Air Date : {{ date }}
    {% if admin %}
    <a href="/admin/delete/work/{% raw url_escape(ID) %}">Delete</a>
    {% end %}

    <h3>Poster</h3>
    <img src="/poster/{{ stitle }}/{{ syear }}/" alt="Serie poster"/>

    <h3>Rating</h3> 
      {% if snote %} {{ snote }}
      {% else %} -
      {% end %}
    /10

    <h3>Genres</h3>
    {% if genres %}
      {{ ', '.join(genres) }}
    {% else %}
       No genres
    {% end %}

    <h3>Countries</h3>
    {% if countries %}
      {{ ', '.join(countries) }}
    {% else %}
      No countries
    {% end %}

    <h3>Languages</h3>
    {% if languages %}
      {{ ', '.join(languages) }}
    {% else %}
      No languages
    {% end %}

    <h3>Director(s)</h3>
    {% if directors %}
      <ul>
        {% for (fname, lname, num) in directors %}
        <li><a href="/person/{% raw url_escape(fname) %}/{% raw url_escape(lname) %}/{% raw url_escape(num) %}">
            {{ fname }} {{ lname }}</a>
          {% if admin %}(<a href="/admin/delete/director/{% raw url_escape(fname) %}/{% raw url_escape(lname) %}/{% raw url_escape(num) %}/{% raw url_escape(ID) %}">delete</a>){% end %}
        </li>
        {% end %}
      </ul>
    {% else %}
      No director
    {% end %}

    <h3>Writer(s)</h3>
    {% if writers %}
      <ul>
        {% for (fname, lname, num) in writers %}
        <li><a href="/person/{{ fname }}/{{ lname }}/{{ num }}">
            {{ fname }} {{ lname }}</a>
          {% if admin %}(<a href="/admin/delete/writer/{% raw url_escape(fname) %}/{% raw url_escape(lname) %}/{% raw url_escape(num) %}/{% raw url_escape(ID) %}">delete</a>){% end %}
        </li>
        {% end %}
      </ul>
    {% else %}
      No writer
    {% end %}

    <h3>Actors</h3>
    {% if actors %}
      <ul>
        {% for (fname, lname, num, role) in actors %}
        <li><a href="/person/{% raw url_escape(fname) %}/{% raw url_escape(lname) %}/{% raw url_escape(num) %}">
            {{ fname }} {{ lname }}</a> as {{ role }}
          {% if admin %}(<a href="/admin/delete/actor/{% raw url_escape(fname) %}/{% raw url_escape(lname) %}/{% raw url_escape(num) %}/{% raw url_escape(ID) %}/{% raw url_escape(role) %}">delete</a>){% end %}
        </li>
        {% end %}
      </ul>
    {% else %}
      No actor
    {% end %}
{% end %}
